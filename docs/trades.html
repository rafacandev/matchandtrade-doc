<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>Match and Trade - Documentation</title>

<link rel='stylesheet' href='css/matchandtrade-doc-style.css'>

<script>
function openTab(evt, tabId) {
    var i, tabcontent, tablinks;
   	var tabIdEnding = tabId.substring(tabId.length-2);

   	tabcontent = document.getElementsByClassName("tabcontent");
    for (i = 0; i < tabcontent.length; i++) {
    	if (tabcontent[i].id.endsWith(tabIdEnding)) {
        	tabcontent[i].style.display = "none";
    	}
    }

    tablinks = document.getElementsByClassName("tablinks");
    for (i = 0; i < tablinks.length; i++) {
    	if (tablinks[i].id.endsWith(tabIdEnding)) {
        	tablinks[i].className = tablinks[i].className.replace(" active", "");
    	}
    }
	
    document.getElementById(tabId).style.display = "block";
    evt.currentTarget.className += " active";
}

function openTabById(tabLinkId, tabId) {
    document.getElementById(tabId).style.display = "block";
    document.getElementById(tabId).className += " active";

    document.getElementById(tabLinkId).className += " active";
}

</script>
</head>
<body>

<h1>Trades</h1>
<p>
	<i>Resource</i> for <span class='incode'>Trades</span>. <span class='incode'>Trades</span> are the the central components of the system.
	The <a href='users.html'>User</a> who creates a <span class='incode'>Trade</span> becomes the <i>organizer</i>
	while other <a href='users.html'>Users</a> can subscribe to the <span class='incode'>Trade</span> and become <i>members</i>.
	<i>Members</i> submit their <a href='items.html'>Items</a> through a <a href='trade-memberships.html'>TradeMembership</a>.
	Later the <i>organizer</i> closes the <span class='incode'>Trade</span> and the system generates the results of the <span class='incode'>Trade</span>.
</p>

<h3>Operations</h3>
<ul>
	<li><span class='incode'>POST rest/v1/trades/</span></li>
	<li><span class='incode'>PUT rest/v1/trades/{tradeId}</span></li>
	<li><span class='incode'>GET rest/v1/trades/{tradeId}</span></li>
	<li><span class='incode'>GET rest/v1/trades?{queryParameters}</span></li>
	<li><span class='incode'>GET rest/v1/trades/</span></li>
	<li><span class='incode'>DELETE rest/v1/trades/{tradeId}</span></li>
</ul>

<h3>Authorization</h3>
<ul>
	<li>Only authenticated clients</li>
</ul>

<h3>Resource</h3>
<table>
	<tr>
		<th>Property Name</th>
		<th>Format</th>
		<th>Description</th>
	</tr>
	<tr>
		<td>name</td>
		<td>read-write, mandatory, unique, 3 min length, 150 max length</td>
		<td>The name of this trade</td>
	</tr>
	<tr>
		<td>state</td>
		<td>read-write, enumeration (see State Values table below)</td>
		<td>The state of this trade, states drive how to interact with the <span class='incode'>Trade</span></td>
	</tr>
	<tr>
		<td>tradeId</td>
		<td>ready-only</td>
		<td>Id associated with this resource</td>
	</tr>
</table>

<h4>State Values</h4>
<table>
	<tr>
		<th>Value</th>
		<th>Description</th>
	</tr>
	<tr>
		<td>SUBMITTING_ITEMS</td>
		<td>Default state when a <span class='incode'>Trade</span> is created. Indicates that <a href='users.html'>Users</a> can join the <span class='incode'>Trade</span> and submit <a href='items.html'>Items</a></td>
	</tr>
	<tr>
		<td>MATCHING_ITEMS</td>
		<td><a href='users.html'>Users</a> can match <a href='items.html'>items</a> in the trade. Other <a href='users.html'>users</a> cannot join the trade nor submit <a href='items.html'>items</a></td>
	</tr>
	<tr>
		<td>GENERATING_TRADES</td>
		<td>The system is generating the <span class='incode'>Trade</span> results</td>
	</tr>
	<tr>
		<td>CLOSED</td>
		<td>The <span class='incode'>Trade</span> is in ready-only mode</td>
	</tr>
</table>

<h3>Query Parameters</h3>
<table>
	<tr>
		<th>Property Name</th>
		<th>Description</th>
	</tr>
	<tr>
		<td>name</td>
		<td>Resources matching <span class='incode'>Trade.name</span></td>
	</tr>
	<tr>
		<td>_pageSize</td>
		<td>See <a href='rest-guide.html'>pagination</a></td>
	</tr>
	<tr>
		<td>_pageNumber</td>
		<td>See <a href='rest-guide.html'>pagination</a></td>
	</tr>
</table>

<h3>Rules</h3>
<ul>
	<li>When a new <span class='incode'>Trade</span> is created, the <a href='users.html'>User</a> associated to the <span class='incode'>Authorization</span> header becomes the <span class='incode'>Trade</span> <i>organizer</i>.
	Hence the system creates a <a href='trade-memberships.html'>TradeMembership.type=OWNER</a></li>
	<li>Only the trade <i>organizer</i> can <span class='incode'>DELETE</span> a <span class='incode'>Trade</span></li>
	<li>Only the trade <i>organizer</i> can <span class='incode'>PUT</span> a <span class='incode'>Trade</span></li>
</ul>

<h3>Examples</h3>
<div class='tab'><button id='summaryTabLink_46' class='tablinks' onclick='openTab(event, "summaryTab_46")'>Summary</button><button id='httpTabLink_46' class='tablinks' onclick='openTab(event, "httpTab_46")'>HTTP</button><button id='curlTabLink_46' class='tablinks' onclick='openTab(event, "curlTab_46")'>curl</button></div><div id='summaryTab_46' class='tabcontent code'>POST http://localhost:8081/rest/v1/trades/
Request:  {  &quot;name&quot; : &quot;Board games&quot;}
Status:   HTTP/1.1 201 
Response: {&quot;name&quot;:&quot;Board games&quot;,&quot;tradeId&quot;:2,&quot;state&quot;:&quot;SUBMITTING_ITEMS&quot;,&quot;_links&quot;:[{&quot;rel&quot;:&quot;self&quot;,&quot;href&quot;:&quot;http:// ...</div><div id='httpTab_46' class='tabcontent code'>-----  Request  -----
POST http://localhost:8081/rest/v1/trades/
Headers:  Authorization: 5616-3587-3282
          Content-Type: application/json

{
  &quot;name&quot; : &quot;Board games&quot;
}

-----  Response  -----
Status:   HTTP/1.1 201 
Headers:  Content-Type: application/json;charset=UTF-8
          Transfer-Encoding: chunked
          Date: Mon, 06 Nov 2017 00:06:37 GMT

{
  &quot;name&quot; : &quot;Board games&quot;,
  &quot;tradeId&quot; : 2,
  &quot;state&quot; : &quot;SUBMITTING_ITEMS&quot;,
  &quot;_links&quot; : [ {
    &quot;rel&quot; : &quot;self&quot;,
    &quot;href&quot; : &quot;http://localhost:8081/rest/v1/trades/2&quot;
  } ]
}</div><div id='curlTab_46' class='tabcontent code'>-----  Request  -----
curl -v -X POST \
-H &quot;Authorization: 5616-3587-3282&quot; \
-H &quot;Content-Type: application/json&quot; \
-d &quot;{  \&quot;name\&quot; : \&quot;Board games\&quot;}&quot; \
http://localhost:8081/rest/v1/trades/

-----  Response  -----
Status:   HTTP/1.1 201 
Headers:  Content-Type: application/json;charset=UTF-8
          Transfer-Encoding: chunked
          Date: Mon, 06 Nov 2017 00:06:37 GMT

{
  &quot;name&quot; : &quot;Board games&quot;,
  &quot;tradeId&quot; : 2,
  &quot;state&quot; : &quot;SUBMITTING_ITEMS&quot;,
  &quot;_links&quot; : [ {
    &quot;rel&quot; : &quot;self&quot;,
    &quot;href&quot; : &quot;http://localhost:8081/rest/v1/trades/2&quot;
  } ]
}
</div><script>openTabById('summaryTabLink_46', "summaryTab_46");</script>

<div class='tab'><button id='summaryTabLink_48' class='tablinks' onclick='openTab(event, "summaryTab_48")'>Summary</button><button id='httpTabLink_48' class='tablinks' onclick='openTab(event, "httpTab_48")'>HTTP</button><button id='curlTabLink_48' class='tablinks' onclick='openTab(event, "curlTab_48")'>curl</button></div><div id='summaryTab_48' class='tabcontent code'>PUT http://localhost:8081/rest/v1/trades/2
Request:  {  &quot;name&quot; : &quot;Board games in Toronto&quot;,  &quot;state&quot; : &quot;MATCHING_ITEMS&quot;}
Status:   HTTP/1.1 200 
Response: {&quot;name&quot;:&quot;Board games in Toronto&quot;,&quot;tradeId&quot;:2,&quot;state&quot;:&quot;MATCHING_ITEMS&quot;,&quot;_links&quot;:[{&quot;rel&quot;:&quot;self&quot;,&quot;href&quot; ...</div><div id='httpTab_48' class='tabcontent code'>-----  Request  -----
PUT http://localhost:8081/rest/v1/trades/2
Headers:  Authorization: 5616-3587-3282
          Content-Type: application/json

{
  &quot;name&quot; : &quot;Board games in Toronto&quot;,
  &quot;state&quot; : &quot;MATCHING_ITEMS&quot;
}

-----  Response  -----
Status:   HTTP/1.1 200 
Headers:  Content-Type: application/json;charset=UTF-8
          Transfer-Encoding: chunked
          Date: Mon, 06 Nov 2017 00:06:37 GMT

{
  &quot;name&quot; : &quot;Board games in Toronto&quot;,
  &quot;tradeId&quot; : 2,
  &quot;state&quot; : &quot;MATCHING_ITEMS&quot;,
  &quot;_links&quot; : [ {
    &quot;rel&quot; : &quot;self&quot;,
    &quot;href&quot; : &quot;http://localhost:8081/rest/v1/trades/2&quot;
  } ]
}</div><div id='curlTab_48' class='tabcontent code'>-----  Request  -----
curl -v -X PUT \
-H &quot;Authorization: 5616-3587-3282&quot; \
-H &quot;Content-Type: application/json&quot; \
-d &quot;{  \&quot;name\&quot; : \&quot;Board games in Toronto\&quot;,  \&quot;state\&quot; : \&quot;MATCHING_ITEMS\&quot;}&quot; \
http://localhost:8081/rest/v1/trades/2

-----  Response  -----
Status:   HTTP/1.1 200 
Headers:  Content-Type: application/json;charset=UTF-8
          Transfer-Encoding: chunked
          Date: Mon, 06 Nov 2017 00:06:37 GMT

{
  &quot;name&quot; : &quot;Board games in Toronto&quot;,
  &quot;tradeId&quot; : 2,
  &quot;state&quot; : &quot;MATCHING_ITEMS&quot;,
  &quot;_links&quot; : [ {
    &quot;rel&quot; : &quot;self&quot;,
    &quot;href&quot; : &quot;http://localhost:8081/rest/v1/trades/2&quot;
  } ]
}
</div><script>openTabById('summaryTabLink_48', "summaryTab_48");</script>

<div class='tab'><button id='summaryTabLink_50' class='tablinks' onclick='openTab(event, "summaryTab_50")'>Summary</button><button id='httpTabLink_50' class='tablinks' onclick='openTab(event, "httpTab_50")'>HTTP</button><button id='curlTabLink_50' class='tablinks' onclick='openTab(event, "curlTab_50")'>curl</button></div><div id='summaryTab_50' class='tabcontent code'>GET http://localhost:8081/rest/v1/trades/2
Status:   HTTP/1.1 200 
Response: {&quot;name&quot;:&quot;Board games in Toronto&quot;,&quot;tradeId&quot;:2,&quot;state&quot;:&quot;MATCHING_ITEMS&quot;,&quot;_links&quot;:[{&quot;rel&quot;:&quot;self&quot;,&quot;href&quot; ...</div><div id='httpTab_50' class='tabcontent code'>-----  Request  -----
GET http://localhost:8081/rest/v1/trades/2
Headers:  Authorization: 5616-3587-3282
          Content-Type: application/json

-----  Response  -----
Status:   HTTP/1.1 200 
Headers:  Content-Type: application/json;charset=UTF-8
          Transfer-Encoding: chunked
          Date: Mon, 06 Nov 2017 00:06:37 GMT

{
  &quot;name&quot; : &quot;Board games in Toronto&quot;,
  &quot;tradeId&quot; : 2,
  &quot;state&quot; : &quot;MATCHING_ITEMS&quot;,
  &quot;_links&quot; : [ {
    &quot;rel&quot; : &quot;self&quot;,
    &quot;href&quot; : &quot;http://localhost:8081/rest/v1/trades/2&quot;
  } ]
}</div><div id='curlTab_50' class='tabcontent code'>-----  Request  -----
curl -v GET \
-H &quot;Authorization: 5616-3587-3282&quot; \
-H &quot;Content-Type: application/json&quot; \
http://localhost:8081/rest/v1/trades/2

-----  Response  -----
Status:   HTTP/1.1 200 
Headers:  Content-Type: application/json;charset=UTF-8
          Transfer-Encoding: chunked
          Date: Mon, 06 Nov 2017 00:06:37 GMT

{
  &quot;name&quot; : &quot;Board games in Toronto&quot;,
  &quot;tradeId&quot; : 2,
  &quot;state&quot; : &quot;MATCHING_ITEMS&quot;,
  &quot;_links&quot; : [ {
    &quot;rel&quot; : &quot;self&quot;,
    &quot;href&quot; : &quot;http://localhost:8081/rest/v1/trades/2&quot;
  } ]
}
</div><script>openTabById('summaryTabLink_50', "summaryTab_50");</script>

<div class='tab'><button id='summaryTabLink_52' class='tablinks' onclick='openTab(event, "summaryTab_52")'>Summary</button><button id='httpTabLink_52' class='tablinks' onclick='openTab(event, "httpTab_52")'>HTTP</button><button id='curlTabLink_52' class='tablinks' onclick='openTab(event, "curlTab_52")'>curl</button></div><div id='summaryTab_52' class='tabcontent code'>GET http://localhost:8081/rest/v1/trades?name=Board%20games%20in%20Toronto&amp;_pageNumber=1&amp;_pageSize=2
Status:   HTTP/1.1 200 
Response: [{&quot;name&quot;:&quot;Board games in Toronto&quot;,&quot;tradeId&quot;:2,&quot;state&quot;:&quot;MATCHING_ITEMS&quot;,&quot;_links&quot;:[{&quot;rel&quot;:&quot;self&quot;,&quot;href ...</div><div id='httpTab_52' class='tabcontent code'>-----  Request  -----
GET http://localhost:8081/rest/v1/trades?name=Board%20games%20in%20Toronto&amp;_pageNumber=1&amp;_pageSize=2
Headers:  Authorization: 5616-3587-3282
          Content-Type: application/json

-----  Response  -----
Status:   HTTP/1.1 200 
Headers:  X-Pagination-Total-Count: 1
          Content-Type: application/json;charset=UTF-8
          Transfer-Encoding: chunked
          Date: Mon, 06 Nov 2017 00:06:37 GMT

[ {
  &quot;name&quot; : &quot;Board games in Toronto&quot;,
  &quot;tradeId&quot; : 2,
  &quot;state&quot; : &quot;MATCHING_ITEMS&quot;,
  &quot;_links&quot; : [ {
    &quot;rel&quot; : &quot;self&quot;,
    &quot;href&quot; : &quot;http://localhost:8081/rest/v1/trades/2&quot;
  } ]
} ]</div><div id='curlTab_52' class='tabcontent code'>-----  Request  -----
curl -v GET \
-H &quot;Authorization: 5616-3587-3282&quot; \
-H &quot;Content-Type: application/json&quot; \
http://localhost:8081/rest/v1/trades?name=Board%20games%20in%20Toronto&amp;_pageNumber=1&amp;_pageSize=2

-----  Response  -----
Status:   HTTP/1.1 200 
Headers:  X-Pagination-Total-Count: 1
          Content-Type: application/json;charset=UTF-8
          Transfer-Encoding: chunked
          Date: Mon, 06 Nov 2017 00:06:37 GMT

[ {
  &quot;name&quot; : &quot;Board games in Toronto&quot;,
  &quot;tradeId&quot; : 2,
  &quot;state&quot; : &quot;MATCHING_ITEMS&quot;,
  &quot;_links&quot; : [ {
    &quot;rel&quot; : &quot;self&quot;,
    &quot;href&quot; : &quot;http://localhost:8081/rest/v1/trades/2&quot;
  } ]
} ]
</div><script>openTabById('summaryTabLink_52', "summaryTab_52");</script>

<div class='tab'><button id='summaryTabLink_54' class='tablinks' onclick='openTab(event, "summaryTab_54")'>Summary</button><button id='httpTabLink_54' class='tablinks' onclick='openTab(event, "httpTab_54")'>HTTP</button><button id='curlTabLink_54' class='tablinks' onclick='openTab(event, "curlTab_54")'>curl</button></div><div id='summaryTab_54' class='tabcontent code'>GET http://localhost:8081/rest/v1/trades/
Status:   HTTP/1.1 200 
Response: [{&quot;name&quot;:&quot;Board games in Ottawa&quot;,&quot;tradeId&quot;:1,&quot;state&quot;:&quot;MATCHING_ITEMS_ENDED&quot;,&quot;_links&quot;:[{&quot;rel&quot;:&quot;self&quot;, ...</div><div id='httpTab_54' class='tabcontent code'>-----  Request  -----
GET http://localhost:8081/rest/v1/trades/
Headers:  Authorization: 5616-3587-3282
          Content-Type: application/json

-----  Response  -----
Status:   HTTP/1.1 200 
Headers:  X-Pagination-Total-Count: 2
          Content-Type: application/json;charset=UTF-8
          Transfer-Encoding: chunked
          Date: Mon, 06 Nov 2017 00:06:37 GMT

[ {
  &quot;name&quot; : &quot;Board games in Ottawa&quot;,
  &quot;tradeId&quot; : 1,
  &quot;state&quot; : &quot;MATCHING_ITEMS_ENDED&quot;,
  &quot;_links&quot; : [ {
    &quot;rel&quot; : &quot;self&quot;,
    &quot;href&quot; : &quot;http://localhost:8081/rest/v1/trades/1&quot;
  } ]
}, {
  &quot;name&quot; : &quot;Board games in Toronto&quot;,
  &quot;tradeId&quot; : 2,
  &quot;state&quot; : &quot;MATCHING_ITEMS&quot;,
  &quot;_links&quot; : [ {
    &quot;rel&quot; : &quot;self&quot;,
    &quot;href&quot; : &quot;http://localhost:8081/rest/v1/trades/2&quot;
  } ]
} ]</div><div id='curlTab_54' class='tabcontent code'>-----  Request  -----
curl -v GET \
-H &quot;Authorization: 5616-3587-3282&quot; \
-H &quot;Content-Type: application/json&quot; \
http://localhost:8081/rest/v1/trades/

-----  Response  -----
Status:   HTTP/1.1 200 
Headers:  X-Pagination-Total-Count: 2
          Content-Type: application/json;charset=UTF-8
          Transfer-Encoding: chunked
          Date: Mon, 06 Nov 2017 00:06:37 GMT

[ {
  &quot;name&quot; : &quot;Board games in Ottawa&quot;,
  &quot;tradeId&quot; : 1,
  &quot;state&quot; : &quot;MATCHING_ITEMS_ENDED&quot;,
  &quot;_links&quot; : [ {
    &quot;rel&quot; : &quot;self&quot;,
    &quot;href&quot; : &quot;http://localhost:8081/rest/v1/trades/1&quot;
  } ]
}, {
  &quot;name&quot; : &quot;Board games in Toronto&quot;,
  &quot;tradeId&quot; : 2,
  &quot;state&quot; : &quot;MATCHING_ITEMS&quot;,
  &quot;_links&quot; : [ {
    &quot;rel&quot; : &quot;self&quot;,
    &quot;href&quot; : &quot;http://localhost:8081/rest/v1/trades/2&quot;
  } ]
} ]
</div><script>openTabById('summaryTabLink_54', "summaryTab_54");</script>

<div class='tab'><button id='summaryTabLink_56' class='tablinks' onclick='openTab(event, "summaryTab_56")'>Summary</button><button id='httpTabLink_56' class='tablinks' onclick='openTab(event, "httpTab_56")'>HTTP</button><button id='curlTabLink_56' class='tablinks' onclick='openTab(event, "curlTab_56")'>curl</button></div><div id='summaryTab_56' class='tabcontent code'>DELETE http://localhost:8081/rest/v1/trades/2
Status:   HTTP/1.1 204 
</div><div id='httpTab_56' class='tabcontent code'>-----  Request  -----
DELETE http://localhost:8081/rest/v1/trades/2
Headers:  Authorization: 5616-3587-3282
          Content-Type: application/json

-----  Response  -----
Status:   HTTP/1.1 204 
Headers:  Date: Mon, 06 Nov 2017 00:06:37 GMT
</div><div id='curlTab_56' class='tabcontent code'>-----  Request  -----
curl -v DELETE \
-H &quot;Authorization: 5616-3587-3282&quot; \
-H &quot;Content-Type: application/json&quot; \
http://localhost:8081/rest/v1/trades/2

-----  Response  -----
Status:   HTTP/1.1 204 
Headers:  Date: Mon, 06 Nov 2017 00:06:37 GMT

</div><script>openTabById('summaryTabLink_56', "summaryTab_56");</script>
</body>
</html>
